#!/bin/bash

# Open Joshuto without a terminal

TIMESTAMP=$(date '+%Y%m%d-%H%M%S')
CWD_FILE="/tmp/joshuto-cwd-${TIMESTAMP}"
env joshuto --last-dir "${CWD_FILE}" $@

if [ -e "${CWD_FILE}" ]; then
    JOSHUTO_CWD=$(cat "${CWD_FILE}")
    rm "${CWD_FILE}" &>/dev/null && JOSHUTO_CWD=${JOSHUTO_CWD} zsh -c 'cd "${JOSHUTO_CWD}"; clear; zsh -i'
fi
